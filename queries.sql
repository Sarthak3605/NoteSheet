CREATE DATABASE MEDICAPS;

USE MEDICAPS;

CREATE TABLE FACULTY(FID CHAR(3) PRIMARY KEY, FNAME VARCHAR(50) NOT NULL);

INSERT INTO FACULTY VALUES('F00','ADMIN'),('F01','Engineering'),('F02','Law'),('F03','Management'),('F04','Pharmacy'),('F05','Agriculture'),('F06','Arts and Humanities'),('F07','Commerce'),('F08','Science');

SELECT * FROM FACULTY;

CREATE TABLE DEPT(FID CHAR(3) NOT NULL,DEPTID CHAR(3) PRIMARY KEY,DEPTNAME VARCHAR(30) NOT NULL,FOREIGN KEY(FID) REFERENCES FACULTY(FID));

INSERT INTO DEPT VALUES('F01','D01','CSE'),('F01','D02','EC'),('F01','D03','CE'),('F01','D04','NT'),('F01','D05','RA'),('F01','D06','ECE'),('F01','D07','IT'),('F01','D08','ME'),('F02','D11','BSC LLB'),('F02','D12','BBA LLB'),('F03','D21','BBA'),('F03','D22','MBA');

SELECT * FROM DEPT;

CREATE TABLE EMPLOYEE (FID CHAR(3), DEPTID CHAR(3),EMPID CHAR(3) PRIMARY KEY,EMPNAME VARCHAR(50) NOT NULL,DESIGNATION VARCHAR(50) NOT NULL,PASSWORD VARCHAR(50) UNIQUE NOT NULL,EMAIL VARCHAR(50) UNIQUE NOT NULL,MOBILENO BIGINT  UNIQUE NOT NULL,FOREIGN KEY(FID) REFERENCES FACULTY(FID),FOREIGN KEY(DEPTID) REFERENCES DEPT(DEPTID));

INSERT INTO EMPLOYEE VALUES('F01','D11','E01','A','HOD','12345','A@XYZ.COM',1234567890),('F01','D12','E02','B','HOD','123','B@XYZ.COM',2134567890),('F01','D11','E03','C','DEAN','1234','C@GMAIL.COM',3124567890);

CREATE TABLE NOTESHEET(NOTEID INTEGER PRIMARY KEY,FID CHAR(3),DEPTID CHAR(3),EMPID CHAR(3),SUBJECT VARCHAR(4000) NOT NULL,DETAILS VARCHAR(4000) NOT NULL,DATEANDTIME DATETIME NOT NULL,REMARKS VARCHAR(4000) NOT NULL,FOREIGN KEY(FID) REFERENCES FACULTY(FID),FOREIGN KEY(DEPTID) REFERENCES DEPT(DEPTID),FOREIGN KEY(EMPID) REFERENCES EMPLOYEE(EMPID));

INSERT INTO NOTESHEET VALUES(1,'F01','D01','E01','DUMMY1','DUMMY','2024-06-12 11:08:04','DUMMY');


CREATE TABLE APPROVED(SNO INTEGER PRIMARY KEY,NOTEID INTEGER NOT NULL,APROVEDBY CHAR(3) NOT NULL,DATEOFAPPROVAL DATETIME NOT NULL);

INSERT INTO APPROVED VALUES(1,1,'E01','2022-06-23 12:04:44'),(2,1,'E03','2022-07-12 12:50:12'),();

FACULTY 
FID- char(3) primary key
FNAME-varchar(50)

DEPT
FID- char(3) foreign key
DEPTID- char(3) primary key
DEPTNAME- varchar(50) not null

EMPLOYEE
FID-char(3) foreign key
DEPTID- char(3) foreign key
EMPID- char(3) primary key
EMPNAME- varchar(50) not null
EMAIL- varchar(50) not null
MOBILE- integer NOT NULL
designation- varchar(50) not null
password-varchar(50) not null

NOTESHEET
noteid- integer primary key
FID-char(3) foreign key
DEPTID- char(3) foreign key
EMPID- char(3) foreign key
subject- varchar(4000) not null
details- varchar(4000) not null
dateandtime- datetime
remarks- varchar(4000) not null
APPROVEDBYHOD VARCHAR(50)
APPROVEDBYDEAN VARCHAR(50)
APPROVEDBYPVC VARCHAR(50)
APPROVEDBYOSD VARCHAR(50)
APPROVEDBYVC VARCHAR(50)
SELECT NOTEID FROM NOTESHEET N, APPROVED A WHERE A.NOTEID=N.NOTEID;



STATUS QUERY: SELECT A.NOTEID,A.APROVEDBY,E.DESIGNATION,
CASE
WHEN E.DESIGNATION='HOD' THEN 'PENDING'
WHEN E.DESIGNATION='DEAN' THEN 'PENDING'
WHEN E.DESIGNATION='PROVC' THEN 'PENDING'
WHEN E.DESIGNATION='OSD' THEN 'PENDING'
WHEN E.DESIGNATION='VC' THEN 'APPROVED'
END
AS STATUS FROM APPROVED A,EMPLOYEE E WHERE E.EMPID=A.APROVEDBY;

//////////////////////////////////////////
/////////////////////////////////////////
 
CREATE TABLE EMPLOYEE 
(FID CHAR(3), 
DEPTID CHAR(3),
EMPID CHAR(3) PRIMARY KEY,
EMPNAME VARCHAR(50) NOT NULL,
DESIGNATION VARCHAR(50) NOT NULL,
PASSWORD VARCHAR(50) UNIQUE NOT NULL,
EMAIL VARCHAR(50) UNIQUE NOT NULL,
MOBILENO BIGINT  UNIQUE NOT NULL,
FOREIGN KEY(FID) REFERENCES FACULTY(FID),
FOREIGN KEY(DEPTID) REFERENCES DEPT(DEPTID));


INSERT INTO EMPLOYEE 
VALUES
('F01','D11','E01','A','HOD','12345','A@XYZ.COM',1234567890),
('F01','D12','E02','B','HOD','123','B@XYZ.COM',2134567890),
('F01','D11','E03','C','DEAN','1234','C@GMAIL.COM',3124567890);